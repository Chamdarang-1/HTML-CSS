<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>register</title>
    <style>
        body {
            font-family: "Noto Sans KR", sans-serif;
            background: #fff;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 720px;
            margin: 50px auto;
            padding: 0 16px;
        }

        h2 {
            text-align: center;
            font-size: 28px;
            margin-bottom: 30px;
        }

        form label {
            display: block;
            margin: 15px 0 8px;
            font-weight: bold;
        }

        form input[type="text"],
        form input[type="password"],
        form input[type="email"],
        form input[type="date"],
        form select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .radio-group {
            margin: 10px 0;
        }

        .radio-group label {
            margin-right: 20px;
            font-weight: normal;
        }

        .address-box {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }

        .address-box input {
            flex: 1;
        }

        .address-box button {
            padding: 12px 20px;
            background: #333;
            color: #fff;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }

        .btn-area {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn-area button {
            width: 48%;
            padding: 15px;
            border: none;
            font-size: 16px;
            cursor: pointer;
            border-radius: 4px;
        }

        .btn-cancel {
            background: #fff;
            border: 1px solid #ccc;
        }

        .btn-submit {
            background: #333;
            color: #fff;
        }

        .success {
            color: green;
            font-size: 13px;
            margin-top: 4px;
        }

        .error {
            color: red;
            font-size: 13px;
            margin-top: 4px;
        }
    </style>
</head>
<script>
    fetch("../main/header.html") //각자 주소 수정!!!
        .then(res => res.text())
        .then(data => {
            document.getElementById("header").innerHTML = data;

            // header.html 안의 스크립트 실행 강제
            const scripts = document.getElementById("header").querySelectorAll("script");
            scripts.forEach(oldScript => {
                const newScript = document.createElement("script");
                if (oldScript.src) {
                    newScript.src = oldScript.src;
                } else {
                    newScript.textContent = oldScript.textContent;
                }
                document.body.appendChild(newScript);
            });
        });


    fetch("../main/footer.html") //각자 주소 수정!!!
        .then(res => res.text())
        .then(data => {
            document.getElementById("footer").innerHTML = data;
        });
</script>


<body>
    <div id="header"></div>


    <div class="container">
        <h2>JOIN</h2>
        <form id="signupForm">

            <!-- 회원구분 -->
            <label>회원구분 *</label>
            <div class="radio-group">
                <label><input type="radio" name="memberType" value="user" checked> 일반회원</label>
                <label><input type="radio" name="memberType" value="seller"> 판매자회원</label>
            </div>

            <!-- 회원인증 -->
            <label>회원인증 *</label>
            <div class="radio-group">
                <label><input type="radio" name="authType" value="phone" checked> 휴대폰 인증</label>
                <label><input type="radio" name="authType" value="email"> 이메일 인증</label>
            </div>
            <button type="button" onclick="verifyAuth()">인증하기</button>
            <p id="authResult" class=""></p>

            <!-- 아이디 -->
            <label for="userid">아이디 *</label>
            <input type="text" id="userid" name="userid" placeholder="영문/숫자 4~16자">
            <button type="button" onclick="checkUserId()">중복확인</button>
            <p id="idResult"></p>

            <!-- 비밀번호 -->
            <label for="password">비밀번호 *</label>
            <input type="password" id="password" name="password" placeholder="영문/숫자/특수문자 2가지 이상, 10~16자">
            <label for="confirmPassword">비밀번호 확인 *</label>
            <input type="password" id="confirmPassword" name="confirmPassword">
            <p id="pwResult"></p>

            <!-- 이름 -->
            <label for="name">이름 *</label>
            <input type="text" id="name" name="name" placeholder="이름 입력">

            <!-- 성별 -->
            <label>성별</label>
            <div class="radio-group">
                <label><input type="radio" name="gender" value="M"> 남자</label>
                <label><input type="radio" name="gender" value="F"> 여자</label>
            </div>

            <!-- 생년월일 -->
            <label for="birth">생년월일 *</label>
            <input type="date" id="birth" name="birth">

            <!-- 주소 -->
            <label>주소 *</label>
            <div class="address-box">
                <input type="text" id="postcode" placeholder="우편번호" readonly>
                <button type="button" onclick="execDaumPostcode()">주소찾기</button>
            </div>
            <input type="text" id="address" placeholder="기본주소" readonly>
            <input type="text" id="detailAddress" placeholder="상세주소">

            <!-- 버튼 -->
            <div class="btn-area">
                <button type="button" class="btn-cancel" onclick="location.href='/'">취소</button>
                <button type="submit" class="btn-submit">가입하기</button>
            </div>
        </form>
    </div>

    <!-- Daum 주소 API -->
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
        // 인증하기 (간단 표시)
        function verifyAuth() {
            document.getElementById("authResult").textContent = "인증 완료되었습니다 ✅";
            document.getElementById("authResult").className = "success";
        }

        // 아이디 중복체크 (임시)
        function checkUserId() {
            const userid = document.getElementById("userid").value;
            const result = document.getElementById("idResult");
            if (userid.length < 4 || userid.length > 16) {
                result.textContent = "아이디는 4~16자여야 합니다.";
                result.className = "error";
            } else {
                result.textContent = "사용 가능한 아이디입니다 ✅";
                result.className = "success";
            }
        }

        // 비밀번호 확인
        document.getElementById("confirmPassword").addEventListener("input", () => {
            const pw = document.getElementById("password").value;
            const confirm = document.getElementById("confirmPassword").value;
            const result = document.getElementById("pwResult");
            if (pw !== confirm) {
                result.textContent = "비밀번호가 일치하지 않습니다.";
                result.className = "error";
            } else {
                result.textContent = "비밀번호가 일치합니다 ✅";
                result.className = "success";
            }
        });

        // Daum 주소 API 실행
        function execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function (data) {
                    document.getElementById("postcode").value = data.zonecode;
                    document.getElementById("address").value = data.address;
                }
            }).open();
        }

        // 폼 제출
        document.getElementById("signupForm").addEventListener("submit", function (e) {
            e.preventDefault();
            alert("회원가입 데이터가 전송됩니다 (DB 연동 예정).");
            location.href = "/welcome"; // 가입완료 페이지 예시
        });
    </script>
    <div id="footer"></div>
</body>

</html>